$(document).ready(function(){const t="http://localhost:3000";function n(){$.ajax({url:`${t}/livros`,method:"GET",success:function(t){const n=$("#tabela-livros tbody");n.empty(),t.forEach(t=>{n.append(`\n                        <tr data-id="${t.id}">\n                            <td>${t.titulo}</td>\n                            <td>${t.autor}</td>\n                            <td>${t.npags}</td>\n                            <td>\n                                <button class="btn-editar">Editar</button>\n                                <button class="btn-excluir">Excluir</button>\n                            </td>\n                        </tr>\n                    `)})}})}$("#form-livro").on("submit",function(o){o.preventDefault();const i=$("#livro-id").val(),a={titulo:$("#titulo").val(),autor:$("#autor").val(),npags:parseInt($("#npags").val())},l=i?"PUT":"POST",e=i?`${t}/livro/${i}`:`${t}/livro`;$.ajax({url:e,method:l,contentType:"application/json",data:JSON.stringify(a),success:function(){n(),$("#form-livro")[0].reset(),$("#livro-id").val("")}})}),$("#tabela-livros").on("click",".btn-editar",function(){const t=$(this).closest("tr"),n=t.data("id"),o=t.find("td:eq(0)").text(),i=t.find("td:eq(1)").text(),a=t.find("td:eq(2)").text();$("#livro-id").val(n),$("#titulo").val(o),$("#autor").val(i),$("#npags").val(a)}),$("#tabela-livros").on("click",".btn-excluir",function(){if(confirm("Tem certeza que deseja excluir este livro?")){const o=$(this).closest("tr").data("id");$.ajax({url:`${t}/livro/${o}`,method:"DELETE",success:function(){n()}})}}),n()});